-- Database: spasoi_ekz
-- DROP DATABASE IF EXISTS spasoi_ekz;

-- CREATE DATABASE IF NOT EXISTS spasoi_ekz
--     WITH
--     OWNER = nyktyz
--     ENCODING = 'UTF8'
--     LC_COLLATE = 'en_US.utf8'
--     LC_CTYPE = 'en_US.utf8'
--     LOCALE_PROVIDER = 'libc'
--     TABLESPACE = pg_default
--     CONNECTION LIMIT = -1
--     IS_TEMPLATE = False;

-- SCHEMA: spasoi_ekz
-- DROP SCHEMA IF EXISTS spasoi_ekz ;

CREATE SCHEMA IF NOT EXISTS spasoi_ekz
	AUTHORIZATION nyktyz;


create table  IF NOT EXISTS spasoi_ekz.s (
    nomer_postavshika VARCHAR(50) PRIMARY KEY,
    imya VARCHAR(50),
    sostoyanie INT,
    gorod VARCHAR(50)
) ;

create table  IF NOT EXISTS spasoi_ekz.p (
    nomer_detali VARCHAR(50) PRIMARY KEY,
    nazvanie VARCHAR(50),
    cvet VARCHAR(50),
    ves INT,
    gorod VARCHAR(50)
) ;

create table  IF NOT EXISTS spasoi_ekz.j (
    nomer_izdelia VARCHAR(50) PRIMARY KEY,
    nazvanie VARCHAR(50),
    gorod VARCHAR(50)
) ;

create table IF NOT EXISTS  spasoi_ekz.spj (
    nomer_postavshika VARCHAR(50) REFERENCES spasoi_ekz.s ON DELETE CASCADE ON UPDATE CASCADE,
    nomer_detali VARCHAR(50) REFERENCES spasoi_ekz.p ON DELETE CASCADE ON UPDATE CASCADE,
    nomer_izdelia VARCHAR(50) REFERENCES spasoi_ekz.j ON DELETE CASCADE ON UPDATE CASCADE,
    kolichestvo INT
) ;


INSERT INTO spasoi_ekz.s VALUES 
('S5',                 'Мелисандра',             65000,  'Мадрид'),
('S2',                 'Бран Старк',            60000,  'Мурманск'),
('S1',                 'Якен Хгар',            1500000,  'Йокогама'),
('S7',                 'Сирио Форель',         1500000,  'Йокогама'),
('S4',                 'Джейме Ланнистер',      750000,  'Лондон'),
('S3',                 'Серсея Ланнистер',     1200000,  'Лондон'),
('S8',                 'Тирион Ланнистер',        2571,  'Манчестер'),
('S9',                 'Иванов',                 35000,  'Мытищи'),
('S10',                'Русе Болтон',            44444,  'Баренцбург'),
('S11',                'Петров Иван',            35000,  'Мытищи'),
('S14',                'Рендилл Тарли',        1111111,  'Прага'),
('S13',                'Сэмвелл Тарли',         999999,  'Прага'),
('S6',                 'Оша',                     NULL,      'Москва'),
('S16',                'Ходор',                   NULL,  'Москва'),
('S15',                'Мелисса Флорент',       888888,  'Стокгольм'),
('S12',                'Петров Пётр',            35001,  'Мытищи'),
('S17',                'Томми Версетти',     123456789,  'Майами'),
('S18',                'Безликий',                   1,  'Йокогама');




INSERT INTO spasoi_ekz.p VALUES
('P9', 'подставка', 'синий', 400, 'Нижний Новгород'),
('P10', 'стойка', 'синий', 2000, 'Нижний Новгород'),
('P11', 'абажур', 'синий', 400, 'Нижний Новгород'),
('P1', 'гайка', 'чёрный', 20, 'Лондон'),
('P3', 'ось', 'белый', 5000, 'Эдинбург'),
('P4', 'зубчатое колесо', 'чёрный', 50, 'Эдинбург'),
('P6', 'транзистор', 'коричневый', 2, 'Токио'),
('P7', 'печатная плата', 'зелёный', 200, 'Токио'),
('P8', 'диод', 'коричневый', 1, 'Токио'),
('P12', 'универсальная детал', 'универсальный', 1, 'Париж'),
('P13', 'уникальная детал', 'уникальный', 1, 'Бостон'),
('P14', 'болт', 'серый', 20, 'Ижевск'),
('P15', 'рама', 'красный', 3000, 'Манчестер'),
('P16', 'колесо', 'белый', 1500, 'Манчестер'),
('P5', 'втулка', 'серый', 350, 'Манчестер'),
('P17', 'бумага', 'белый', 1, 'Астрахань'),
('P18', 'плитка', 'белый', 300, 'Флоренция'),
('P19', 'орнамент', 'серый', 800, 'Флоренция'),
('P20', 'уголок', 'серый', 100, 'Флоренция'),
('P21', 'гайка 01-01', 'серебристый', 20, 'Клин'),
('P22', 'усиленная рама', 'красный', 3200, 'Череповец'),
('P23', 'винт', 'розовый', 5, 'Ижевск'),
('P24', 'труселя', 'красный', 20, 'Челябинск'),
('P25', 'штуцерная деталь', 'коричневый', 450, 'Череповец'),
('P2', 'шуруп', 'чёрный', 5, 'Лондон'),
('P26', 'лезвие', 'бесцветный', 120, 'Йокогама');



INSERT INTO spasoi_ekz.j VALUES 
('J1',             'автомобиль',             'Магнитогорск'),
('J2',             'процессор',              'Зеленоград'),
('J3',             'торшер',                 'Нижний Новгород'),
('J4',             'универсальное изделие',  'Париж'),
('J5',             'уникальное изделие',     'Бостон'),
('J6',             'велосипед 01/23',        'Манчестер'),
('J7',             'изделие из болтов',      'Челябинск'),
('J8',             'шкаф',                   'Ярославль'),
('J9',             'рама 02-01',             'Череповец'),
('J10',            'книга',                  'Астрахань'),
('J11',            'панно 01-03',            'Флоренция'),
('J12',            'велосипед 03-04',        'Клин'),
('J13',            'рама 02-03',             'Череповец'),
('J14',            'штуцер 01-02',           'Череповец'),
('J15',            'велосипед 01-04',        'Клин'),
('J16',            'кружевное бельё',        'Челябинск'),
('J17',            'штуцер 01-03',           'Череповец'),
('J18',            'кинжал',                 'Йокогама');




INSERT INTO spasoi_ekz.spj VALUES
('S1',                 'P6',            'J2',                      20),
('S1',                 'P7',            'J2',                       5),
('S2',                 'P1',            'J1',                       4),
('S6',                 'P4',            'J1',                       2),
('S6',                 'P5',            'J1',                       6),
('S3',                 'P9',            'J3',                       1),
('S4',                 'P10',           'J3',                       1),
('S5',                 'P11',           'J3',                       1),
('S2',                 'P4',            'J1',                       8),
('S6',                 'P3',            'J1',                      50),
('S7',                 'P8',            'J2',                      25),
('S1',                 'P12',           'J4',                       1),
('S2',                 'P12',           'J4',                       1),
('S3',                 'P12',           'J4',                       1),
('S4',                 'P12',           'J4',                       1),
('S5',                 'P12',           'J4',                       1),
('S7',                 'P12',           'J4',                       1),
('S7',                 'P2',            'J1',                       1),
('S6',                 'P2',            'J1',                       9),
('S6',                 'P12',           'J4',                       7),
('S1',                 'P13',           'J5',                      14),
('S6',                 'P14',           'J1',                    9000),
('S2',                 'P14',           'J1',                       3),
('S6',                 'P1',            'J1',                      12),
('S8',                 'P15',           'J6',                       1),
('S8',                 'P16',           'J6',                       2),
('S3',                 'P5',            'J6',                      10),
('S10',                'P2',            'J8',                       4),
('S8',                 'P1',            'J7',                      16),
('S9',                 'P14',           'J7',                       3),
('S11',                'P10',           'J3',                       2),
('S12',                'P15',           'J1',                       3),
('S11',                'P11',           'J3',                       4),
('S10',                'P14',           'J9',                       5),
('S13',                'P17',           'J10',                   1001),
('S14',                'P17',           'J10',                   1111),
('S15',                'P17',           'J10',                   1010),
('S5',                 'P18',           'J11',                      9),
('S5',                 'P19',           'J11',                      1),
('S5',                 'P20',           'J11',                      4),
('S9',                 'P14',           'J8',                      25),
('S12',                'P21',           'J12',                     15),
('S11',                'P22',           'J13',                      9),
('S11',                'P1',            'J14',                     26),
('S12',                'P1',            'J14',                     13),
('S12',                'P2',            'J14',                     54),
('S12',                'P23',           'J4',                     101),
('S12',                'P16',           'J15',                     40),
('S7',                 'P21',           'J12',                      3),
('S8',                 'P21',           'J12',                      4),
('S9',                 'P21',           'J12',                      5),
('S1',                 'P24',           'J16',                      1),
('S1',                 'P15',           'J6',                       3),
('S4',                 'P25',           'J17',                      1),
('S17',                'P16',           'J1',                       4),
('S18',                'P26',           'J18',                      1);
